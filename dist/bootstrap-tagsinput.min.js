/*
 * bootstrap-tagsinput v0.3.9 by Tim Schlechter
 * 
 */

!function(a){"use strict";function b(b,c){this.itemsArray=[],this.$element=a(b),this.$element.hide(),this.isSelect="SELECT"===b.tagName,this.multiple=this.isSelect&&b.hasAttribute("multiple"),this.objectItems=c&&c.itemValue,this.placeholderText=b.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=a('<div class="bootstrap-tagsinput"></div>'),this.$input=a('<input size="'+this.inputSize+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(c)}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a){return a?g.text(a).html():""}function e(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}var f={tagClass:function(){return"label label-info"},itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(a,b){b.hide().fadeIn()}};b.prototype={constructor:b,add:function(b,c){var e=this;if(!(e.options.maxTags&&e.itemsArray.length>=e.options.maxTags||b!==!1&&!b)){if("object"==typeof b&&!e.objectItems)throw"Can't add objects when itemValue option is not set";if(!b.toString().match(/^\s*$/)){e.isSelect&&!e.multiple&&e.itemsArray.length>0&&e.remove(e.itemsArray[0]);var f=e.options.itemValue(b),g=e.options.itemText(b),h=e.options.tagClass(b),i=a.grep(e.itemsArray,function(a){return e.options.itemValue(a)===f})[0];if(i){if(e.options.onTagExists){var j=a(".tag",e.$container).filter(function(){return a(this).data("item")===i});e.options.onTagExists(b,j)}}else{e.itemsArray.push(b);var k=a('<span class="tag '+d(h)+'">'+d(g)+'<span data-role="remove"></span></span>');if(k.data("item",b),e.findInputWrapper().before(k),k.after(" "),e.isSelect&&!a('option[value="'+escape(f)+'"]',e.$element)[0]){var l=a("<option selected>"+d(g)+"</option>");l.data("item",b),l.attr("value",f),e.$element.find("option").eq(k.index()-1).after(l)}c||e.pushVal(),e.options.maxTags===e.itemsArray.length&&e.$container.addClass("bootstrap-tagsinput-max"),e.$element.trigger(a.Event("itemAdded",{item:b}))}}}},remove:function(b,c){var d=this;if(d.objectItems&&(b="object"==typeof b?a.grep(d.itemsArray,function(a){return d.options.itemValue(a)==d.options.itemValue(b)})[0]:a.grep(d.itemsArray,function(a){return d.options.itemValue(a)==b})[0]),b){var e=function(){return a(this).data("item")==b};a(".tag",d.$container).filter(e).remove(),a("option",d.$element).filter(e).remove(),d.itemsArray.splice(a.inArray(b,d.itemsArray),1)}c||d.pushVal(),d.options.maxTags>d.itemsArray.length&&d.$container.removeClass("bootstrap-tagsinput-max"),d.$element.trigger(a.Event("itemRemoved",{item:b}))},removeAll:function(){var b=this;for(a(".tag",b.$container).remove(),a("option",b.$element).remove();b.itemsArray.length>0;)b.itemsArray.pop();b.pushVal(),b.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var b=this;a(".tag",b.$container).each(function(){var c=a(this),e=c.data("item"),f=b.options.itemValue(e),g=b.options.itemText(e),h=b.options.tagClass(e);if(c.attr("class",null),c.addClass("tag "+d(h)),c.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=d(g),b.isSelect){var i=a("option",b.$element).filter(function(){return a(this).data("item")===e});i.attr("value",f)}})},items:function(){return this.itemsArray},pushVal:function(){var b=this,c=a.map(b.items(),function(a){return b.options.itemValue(a).toString()});b.$element.val(c,!0).trigger("change")},build:function(b){var d=this;d.options=a.extend({},f,b);d.options.typeahead||{};d.objectItems&&(d.options.freeInput=!1),c(d.options,"itemValue"),c(d.options,"itemText"),c(d.options,"tagClass"),d.$container.on("click",a.proxy(function(){d.$input.focus()},d)),d.$container.on("keydown","input",a.proxy(function(b){var c=a(b.target),f=d.findInputWrapper();switch(b.which){case 8:if(0===e(c[0])){var g=f.prev();g&&d.remove(g.data("item"))}break;case 46:if(0===e(c[0])){var h=f.next();h&&d.remove(h.data("item"))}break;case 37:var i=f.prev();0===c.val().length&&i[0]&&(i.before(f),c.focus());break;case 39:var j=f.next();0===c.val().length&&j[0]&&(j.after(f),c.focus());break;default:d.options.freeInput&&a.inArray(b.which,d.options.confirmKeys)>=0&&(d.add(c.val()),c.val(""),b.preventDefault())}c.attr("size",Math.max(this.inputSize,c.val().length))},d)),d.$container.on("click","[data-role=remove]",a.proxy(function(b){d.remove(a(b.target).closest(".tag").data("item"))},d)),d.options.itemValue===f.itemValue&&("INPUT"===d.$element[0].tagName?d.add(d.$element.val()):a("option",d.$element).each(function(){d.add(a(this).attr("value"),!0)}))},destroy:function(){var a=this;a.$container.off("keypress","input"),a.$container.off("click","[role=remove]"),a.$container.remove(),a.$element.removeData("tagsinput"),a.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)}},a.fn.tagsinput=function(c,d){var e=[];return this.each(function(){var f=a(this).data("tagsinput");if(f){var g=f[c](d);void 0!==g&&e.push(g)}else f=new b(this,c),a(this).data("tagsinput",f),e.push(f),"SELECT"===this.tagName&&a("option",a(this)).attr("selected","selected"),a(this).val(a(this).val())}),"string"==typeof c?e.length>1?e:e[0]:e},a.fn.tagsinput.Constructor=b;var g=a("<div />");a(function(){a("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery);
//# sourceMappingURL=bootstrap-tagsinput.min.js.map